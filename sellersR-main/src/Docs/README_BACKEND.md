# üöÄ WILBERIS ANALYTICS BACKEND

> –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ Wildberries –Ω–∞ Spring Boot

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

```bash
# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
cd BackWilberisProject
mvn spring-boot:run

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:8080/api/auth/register
```

## üìÅ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| üìñ [`API_DOCUMENTATION.md`](./API_DOCUMENTATION.md) | **–ü–æ–ª–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ |
| üèóÔ∏è [`BACKEND_OVERVIEW.md`](./BACKEND_OVERVIEW.md) | **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ë–î |
| üóÑÔ∏è [`database_setup.sql`](./database_setup.sql) | **SQL —Å—Ö–µ–º–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ –∏–Ω–¥–µ–∫—Å–æ–≤ |
| ‚öôÔ∏è [`application.yml`](./src/main/resources/application.yml) | **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î, Telegram, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è |

## üéØ –û–°–ù–û–í–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - JWT —Ç–æ–∫–µ–Ω—ã + Telegram –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è  
‚úÖ **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∏ API –∫–ª—é—á–∞–º–∏  
‚úÖ **–ü–æ–¥–ø–∏—Å–∫–∏** - –ø–ª–∞–Ω—ã –¥–æ—Å—Ç—É–ø–∞ –∏ –ø–ª–∞—Ç–µ–∂–∏  
‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - —Ñ–∏–Ω–∞–Ω—Å—ã, —é–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏–∫–∞, ABC-–∞–Ω–∞–ª–∏–∑  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - Spring Security + CORS  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - Wildberries API + Telegram Bot  

## üèõÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

```
Frontend (React) ‚Üí Security Layer ‚Üí Controllers ‚Üí Services ‚Üí Repository ‚Üí Database
                                      ‚Üì
                               External APIs (Telegram, Wildberries)
```

## üìã –û–°–ù–û–í–ù–´–ï –≠–ù–î–ü–û–ò–ù–¢–´

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/api/auth`)
- `POST /register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É  
- `POST /verify` - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- `GET /user-info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `PUT /api-key` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Wildberries API –∫–ª—é—á–∞

### üí∞ –ü–æ–¥–ø–∏—Å–∫–∏ (`/api/subscription`)
- `GET /plans` - –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–ª–∞–Ω—ã
- `GET /info` - –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- `POST /create` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- `DELETE /cancel` - –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏

### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/api/analytics`)
- `GET /financial` - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á–µ—Ç
- `GET /unit-economics` - –Æ–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏–∫–∞  
- `GET /advertising` - –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
- `GET /abc-analysis` - ABC-–∞–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤

### üåç –ü—É–±–ª–∏—á–Ω—ã–µ (`/api/public`)
- `POST /subscription/free` - –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- `GET /subscription/debug/{email}` - –û—Ç–ª–∞–¥–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –¢–∞–±–ª–∏—Ü—ã
- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **subscriptions** - –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ò–Ω–¥–µ–∫—Å—ã
- `idx_users_email` - –ø–æ–∏—Å–∫ –ø–æ email
- `idx_subscriptions_user_id` - –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `idx_subscriptions_status` - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏

## üîß –ù–ê–°–¢–†–û–ô–ö–ê

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
```sql
CREATE DATABASE wilberis_analytics;
CREATE USER wilberis WITH PASSWORD 'password';
GRANT ALL PRIVILEGES ON DATABASE wilberis_analytics TO wilberis;
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `application.yml`
```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/wilberis_analytics
    username: wilberis
    password: password

telegram:
  bot:
    token: "YOUR_TELEGRAM_BOT_TOKEN"
    username: "YourBotUsername"
```

### 3. –ó–∞–ø—É—Å–∫
```bash
mvn clean install
mvn spring-boot:run
```

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### JWT –¢–æ–∫–µ–Ω—ã
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 24 —á–∞—Å–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —Å–¥–≤–∏–≥—É –≤—Ä–µ–º–µ–Ω–∏: 5 –º–∏–Ω—É—Ç

### CORS
–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ origins:
- `http://localhost:3000`
- `http://localhost:5173`  
- `http://127.0.0.1:5173`
- `http://127.0.0.1:3000`

## üîå –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### Telegram Bot
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ Telegram
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö

### Wildberries API
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
- ABC-–∞–Ω–∞–ª–∏–∑ —Ç–æ–≤–∞—Ä–æ–≤

## üìä –î–ê–ù–ù–´–ï

### Demo –¥–∞–Ω–Ω—ã–µ
–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤:
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã —Å –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–π —Ä–∞–∑–±–∏–≤–∫–æ–π
- –Æ–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏–∫–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º
- –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ –∏ –∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å  
- ABC-–∞–Ω–∞–ª–∏–∑ —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π —Ç–æ–≤–∞—Ä–æ–≤

### –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ Wildberries API –∫–ª—é—á–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—É—á–∞–µ—Ç:
- –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥–∞–∂–∏ –∏ –∑–∞–∫–∞–∑—ã
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- –î–∞–Ω–Ω—ã–µ –ø–æ —Ä–µ–∫–ª–∞–º–Ω—ã–º –∫–∞–º–ø–∞–Ω–∏—è–º
- –î–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ —Ç–æ–≤–∞—Ä–∞–º

## üö® –¢–ò–ü–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### JWT Token expired
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è, —Ç–æ–∫–µ–Ω –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### CORS –æ—à–∏–±–∫–∏  
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å origin –≤ SecurityConfig.allowedOrigins

### Database connection failed
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î –≤ application.yml

### Telegram bot not responding
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìà –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- HikariCP connection pool
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –ø–æ–ª–µ–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Rate limiting –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:8080/actuator/health

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
tail -f logs/application.log
```

## üê≥ DOCKER

```dockerfile
FROM openjdk:11-jre-slim
COPY target/wilberis-analytics-*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

```bash
docker build -t wilberis-analytics .
docker run -p 8080:8080 wilberis-analytics
```

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

**Telegram:** @SellersWilberis_bot  
**Email:** support@wilberis-analytics.com  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. —Ñ–∞–π–ª—ã –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ

**üìÖ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 27.01.2025  
**üè∑Ô∏è –í–µ—Ä—Å–∏—è:** 1.0.0